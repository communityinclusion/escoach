<div class="results-table maintable">
  <table id="activities-table" class="escoach-homepage-table table table-striped table-light table-sm">
    <thead>
    <tr>
      <th>Activities</th>
      {% if data.role == 'ANON' %}
        <th>State</th>
      {% elseif data.role == 'Employment consultant' or data.role == 'Manager-consultant' %}
        <th>Me</th>
        <th>My Team</th>
      {% elseif data.role == 'Manager' %}
        <th>My Team</th>
      {% elseif data.role == 'TA' %}
        <th>Provider</th>
      {% endif %}
      <th{{ colspan }}>All</th>
    </tr>
    </thead>
    <tbody>
    {% for machine, info in data.activities %}
      <tr>
        <td>{{ info.label }}</td>
        {% if data.role == 'ANON' %}
          <td>{{ data.lastMonth.State[machine].formatted }}
          {% if data.lastMonth.State[machine].betterMonth %}
            <span class="betterMonth" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than last month"></span>
          {% endif %}
            {% if data.lastMonth.State[machine].betterAll %}
              <span class="betterAll" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than All"></span>
            {% endif %}
          </td>
        {% elseif data.role == 'Employment consultant' or data.role == 'Manager-consultant' %}
          <td>{{ data.lastMonth.Me[machine].formatted }}
            {% if data.lastMonth.Me[machine].betterMonth %}
              <span class="betterMonth" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than last month"></span>
            {% endif %}
            {% if data.lastMonth.Me[machine].betterAll %}
              <span class="betterAll" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than All"></span>
            {% endif %}
          </td>
          <td>{{ data.lastMonth.Provider[machine].formatted }}
            {% if data.lastMonth.Provider[machine].betterMonth %}
              <span class="betterMonth" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than last month"></span>
            {% endif %}
            {% if data.lastMonth.Provider[machine].betterAll %}
              <span class="betterAll" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than All"></span>
            {% endif %}
          </td>
        {% elseif data.role == 'Manager' %}
          <td>{{ data.lastMonth.Provider[machine].formatted }}
            {% if data.lastMonth.Provider[machine].betterMonth %}
              <span class="betterMonth" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than last month"></span>
            {% endif %}
            {% if data.lastMonth.Provider[machine].betterAll %}
              <span class="betterAll" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than All"></span>
            {% endif %}
          </td>
        {% elseif data.role == 'TA' %}
          <td>{{ data.lastMonth.Provider[machine].formatted }}
            {% if data.lastMonth.Provider[machine].betterMonth %}
              <span class="betterMonth" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than last month"></span>
            {% endif %}
            {% if data.lastMonth.Provider[machine].betterAll %}
              <span class="betterAll" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than All"></span>
            {% endif %}
          </td>
        {% endif %}
        <td>{{ data.lastMonth.All[machine].formatted }}</td>
      </tr>
    {% endfor %}
    <tr class="response-rate">
      <td>Response Rate</td>
      {% if data.role == 'ANON' %}
        {% set responseRate = data.responseRate.State.responseRate * 100 %}
        <td>{{ responseRate | number_format(1) }}%
          {% if data.responseRate.State.strong %}
            <span class="goodResponseIcon" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Good Response"></span>
          {% endif %}
          {% if data.responseRate.State.betterMonth %}
            <span class="betterMonth" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than last month"></span>
          {% endif %}
          {% if data.responseRate.State.betterAll %}
            <span class="betterAll" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than All"></span>
          {% endif %}
        </td>
      {% elseif data.role == 'Employment consultant' or data.role == 'Manager-consultant' %}
        {% set responseRate = data.responseRate.Me.responseRate * 100 %}
        <td>{{ responseRate | number_format(1) }}%
          {% if data.responseRate.Me.strong %}
            <span class="goodResponseIcon" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Good Response"></span>
          {% endif %}
          {% if data.responseRate.Me.betterMonth %}
            <span class="betterMonth" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than last month"></span>
          {% endif %}
          {% if data.responseRate.Me.betterAll %}
            <span class="betterAll" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than All"></span>
          {% endif %}
        </td>
        {% set responseRate = data.responseRate.Provider.responseRate * 100 %}
        <td>{{ responseRate | number_format(1) }}%
          {% if data.responseRate.Provider.strong %}
            <span class="goodResponseIcon" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Good Response"></span>
          {% endif %}
          {% if data.responseRate.Provider.betterMonth %}
            <span class="betterMonth" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than last month"></span>
          {% endif %}
          {% if data.responseRate.Provider.betterAll %}
            <span class="betterAll" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than All"></span>
          {% endif %}
        </td>
      {% elseif data.role == 'Manager' %}
        {% set responseRate = data.responseRate.Provider.responseRate * 100 %}
        <td>{{ responseRate | number_format(1) }}%
          {% if data.responseRate.Provider.strong %}
            <span class="goodResponseIcon" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Good Response"></span>
          {% endif %}
          {% if data.responseRate.Provider.betterMonth %}
            <span class="betterMonth" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than last month"></span>
          {% endif %}
          {% if data.responseRate.Provider.betterAll %}
            <span class="betterAll" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than All"></span>
          {% endif %}
        </td>
      {% elseif data.role == 'TA' %}
        {% set responseRate = data.responseRate.Provider.responseRate * 100 %}
        <td>{{ responseRate | number_format(1) }}%
          {% if data.responseRate.Provider.strong %}
            <span class="goodResponseIcon" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Good Response"></span>
          {% endif %}
          {% if data.responseRate.Provider.betterMonth %}
            <span class="betterMonth" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than last month"></span>
          {% endif %}
          {% if data.responseRate.Provider.betterAll %}
            <span class="betterAll" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Better than All"></span>
          {% endif %}
        </td>
      {% endif %}
      {% set responseRate = data.responseRate.All.responseRate * 100 %}
      <td>{{ responseRate | number_format(1) }}%
        {% if data.responseRate.All.strong %}
          <span class="goodResponseIcon" data-bs-toggle="tooltip" data-placement="top" data-bs-title="Good Response"></span>
        {% endif %}
      </td>
    </tr>
    <tr class="number-of-respondents">
      <td># of Respondents</td>
      {% if data.role == 'ANON' %}
        <td>{{ data.responseRate.State.netResponses | number_format }}
          {% if data.responseRate.State.alert %}
            <span class="alertIcon" data-bs-toggle="tooltip" data-placement="top" data-bs-title="At least 3 respondents are required"></span>
          {% endif %}
        </td>
      {% elseif data.role == 'Employment consultant' or data.role == 'Manager-consultant' %}
        <td>{{ data.responseRate.Me.netResponses }}
          {% if data.responseRate.Me.alert %}
            <span class="alertIcon" data-bs-toggle="tooltip" data-placement="top" data-bs-title="At least 3 respondents are required"></span>
          {% endif %}
        </td>
        <td>{{ data.responseRate.Provider.netResponses | number_format }}
          {% if data.responseRate.Provider.alert %}
            <span class="alertIcon" data-bs-toggle="tooltip" data-placement="top" data-bs-title="At least 3 respondents are required"></span>
          {% endif %}
        </td>
      {% elseif data.role == 'Manager' %}
        <td>{{ data.responseRate.Provider.netResponses | number_format }}
          {% if data.responseRate.Provider.alert %}
            <span class="alertIcon" data-bs-toggle="tooltip" data-placement="top" data-bs-title="At least 3 respondents are required"></span>
          {% endif %}
        </td>
      {% elseif data.role == 'TA' %}
        <td>{{ data.responseRate.Provider.netResponses | number_format }}
          {% if data.responseRate.Provider.alert %}
            <span class="alertIcon" data-bs-toggle="tooltip" data-placement="top" data-bs-title="At least 3 respondents are required"></span>
          {% endif %}
        </td>
      {% endif %}
      <td>{{ data.responseRate.All.netResponses }}</td>
    </tr>
    </tbody>
  </table>

</div>
